<style type='text/css'>
	$core_v2_widget.ExecuteFile('required-style.css')
</style>

#set($searchQuery = "%{}")
#set($widgetList=$frcommon_v1_pageAudit.ListWidgets($searchQuery))

<h2>Widgets</h2>
<table class='fourroads-table'>
    <thead>
        <tr>
            <td>FactoryDefaultProvider</td>
            <td>Widgets</td>
            <td>Pages</td>
        </tr>
    </thead>
    <tbody>
        #foreach($widget in $widgetList)
        <tr>
            <td data-instanceIdentifier="$widget.InstanceIdentifier">
                $widget.FactoryDefaultProviderName
            </td>
            <td>
                <strong>$widget.Name</strong>
                #if($widget.Description)
                    <br/>
                    <i>$widget.Description</i>
                #end
            </td>
            <td>
                <ul>
                    #foreach($page in $widget.Pages)
                        <li data-contentid="$page.ContentId">
                            #if($page.Url && $page.Url != '')
                                <a href='$page.Url'>
                            #end
                            #if($page.IsCustom)
                                #if($page.CustomPageName)
                                    $page.CustomPageName
                                #elseif($page.CustomPageTitle)
                                    $page.CustomPageTitle
                                #else
                                    $page.Name
                                #end
                            #else
                                $page.Name
                            #end
                            #if($page.Url && $page.Url != '')
                                </a>
                            #end
                        </li>
                    #end
                </ul>
            </td>
        </tr>
        #end
    </tbody>
</table>